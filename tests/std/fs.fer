let assert = import('std/assert');

let io = import('std/io');
let fs = import('std/fs');
let vec = import('std/vec');

/* sample comment block */

let srcPath = __SRC_PATH__.path();
let srcDir = __SRC_DIR__.path();

assert.eq(fs.exists(srcPath), true);

assert.gt(fs.walkDir(srcDir).len(), 0);

/*
sample comment block
multiline
*/

let file = fs.fopen(srcPath);

assert.gt(file.lines().len(), 0);

for line in file.eachLine() {
        io.println('>', line, '<');
}
file.seek(0, fs.SEEK_SET);

let blocks = file.readBlocks('/*', '*/');
assert.eq(blocks[0], ' sample comment block ');
assert.eq(blocks[1], '\nsample comment block\nmultiline\n');
assert.eq(blocks[2], '\', \''); # from readBlocks() itself

# File management stuff

let insfile = '__testinsfile__'.path();
fs.install(srcPath, insfile);
assert.eq(fs.exists(insfile), true);
fs.remove(insfile);
assert.eq(!fs.exists(insfile), true);

let dir = '__testdir__'.path();
let movedDir = '__moved_testdir__'.path();
fs.mkdir(dir);
assert.eq(fs.exists(dir), true);
fs.move(dir, movedDir);
assert.eq(fs.exists(movedDir), true);
assert.eq(!fs.exists(dir), true);
fs.move(movedDir, dir);
fs.remove(dir);
assert.eq(!fs.exists(dir), true);

let cpfile = '__testcpfile__'.path();
fs.copy(srcPath, cpfile);
assert.eq(fs.exists(cpfile), true);
fs.remove(cpfile);
assert.eq(!fs.exists(cpfile), true);


# Just... utility stuff?

let suavePath = 'C:\\Users\\Some/file/../here/and/a/double//here'.path();
let normiePath = suavePath.normal();
assert.eq(normiePath.str(), 'C:/Users/Some/here/and/a/double/here');