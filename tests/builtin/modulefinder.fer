# Check if custom module finders work
let assert = import('std/assert');

let fs = import('std/fs');

let customModuleFinder = fn(moduleName, isimport) {
    if !isimport { return nil; }
    let module = moduleName + '.fer';
    let testPath = __SRC_DIR__.path() / module;
    if fs.exists(testPath) { return testPath.str(); }
    return nil;
};

feral.moduleFinders.push(customModuleFinder);

# import the test 'int.fer' in the current directory
let intTest = import('int');

assert.eq(feral.varExists("intTest"), true);
assert.eq(feral.moduleFinders.len(), 2);